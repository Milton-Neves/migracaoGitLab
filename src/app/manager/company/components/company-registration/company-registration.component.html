<main class="company-registration">
  <header class="company-registration__header">
    <app-page-title [title]="'Cadastrar Empresas'"></app-page-title>
  </header>
  <section class="company-registration__form">
    <form [formGroup]="form">
      <div class="company-registration__form-container">
        <h2>Dados da Empresa</h2>

        <div class="grid line-1">
          <div class="company-registration__input-group">
            <input
              formControlName="name"
              type="text"
              placeholder="Nome Fantasia"
            />
          </div>

          <div class="company-registration__input-group">
            <input
              formControlName="cnpj"
              mask="00.000.000/0000-00"
              type="text"
              placeholder="CNPJ"
            />
          </div>
        </div>

        <div class="grid line-2">
          <div class="company-registration__input-group">
            <input
              formControlName="companyName"
              type="text"
              placeholder="Razão Social"
            />
          </div>
          <div class="company-registration__input-group">
            <select formControlName="amountEmployees">
              <option value="" selected hidden disabled>Ramo da Empresa</option>
              <option
                *ngFor="let amountEmployee of amountEmployees"
                [value]="amountEmployee"
              >
                {{ amountEmployee }}
              </option>
            </select>
          </div>

          <div class="company-registration__input-group">
            <select formControlName="workfield">
              <option selected hidden disabled value="">Ramo da Empresa</option>
              <option
                *ngFor="let workfield of workfields"
                [value]="workfield | json"
              >
                {{ workfield.name }}
              </option>
            </select>
          </div>
        </div>
      </div>

      <div class="company-registration__form-container">
        <h2>Contato</h2>

        <div
          class="company-registration__input-group company-registration__input-group--phone-number-array grid line-3"
        >
          <input
            class="email-input"
            formControlName="cnpj"
            type="text"
            placeholder="E-mail"
          />
          <div class="phone-number-array__array">
            <ng-container
              formArrayName="phoneNumbers"
              *ngFor="
                let pn of phoneNumbers.controls;
                let i = index;
                let first = first
              "
            >
              <div
                class="phone-number-array__phone-number"
                *ngIf="first"
                [formGroupName]="i"
              >
                <div
                  class="phone-number-array__input company-registration__input-group"
                >
                  <input
                    formControlName="number"
                    type="text"
                    placeholder="Telefone"
                  />
                  <button type="button" (click)="addNewPhoneNumber()">
                    <img
                      src="../../../../../assets/icons/icon-sum.svg"
                      alt="icon-sum"
                    />
                  </button>
                </div>
                <div class="phone-number-array__checkbox">
                  <label for="isOwner">É proprietario?</label>
                  <input
                    type="checkbox"
                    formControlName="isOwner"
                    name="isOwner"
                    id="isOwner"
                  />
                </div>
              </div>

              <div
                class="phone-number-array__phone-number"
                *ngIf="!first"
                [formGroupName]="i"
              >
                <div
                  class="company-registration__input-group phone-number-array__input"
                >
                  <input
                    formControlName="number"
                    type="text"
                    placeholder="Telefone"
                  />
                  <button type="button" (click)="removePhoneNumber(i)">
                    <img
                      src="../../../../../assets/images/icon-recusar-vermelho.svg"
                      alt="icon-sum"
                      class="icon-recursa"
                    />
                  </button>
                </div>
                <div class="phone-number-array__checkbox">
                  <label for="isOwner">É proprietario?</label>
                  <input
                    type="checkbox"
                    formControlName="isOwner"
                    name="isOwner"
                    id="isOwner"
                  />
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>

      <div formGroupName="address" class="company-registration__form-container">
        <h2>Endereço</h2>

        <div class="grid line-4">
          <div class="company-registration__input-group">
            <input
              formControlName="zipCode"
              type="text"
              placeholder="CEP"
              mask="00000-000"
              (blur)="getZipCode()"
            />
          </div>
          <div class="company-registration__input-group">
            <input formControlName="street" type="text" placeholder="Rua" />
          </div>
          <div class="company-registration__input-group">
            <input formControlName="number" type="text" placeholder="Número" />
          </div>
        </div>

        <div class="grid line-5">
          <div class="company-registration__input-group">
            <input formControlName="city" type="text" placeholder="Cidade" />
          </div>
          <div class="company-registration__input-group">
            <input
              required
              formControlName="neighborhood"
              type="text"
              placeholder="Bairro"
            />
          </div>
          <div class="company-registration__input-group">
            <input
              formControlName="complement"
              type="text"
              placeholder="Complemento"
            />
          </div>
        </div>
      </div>

      <div
        formGroupName="legalRepresentative"
        class="company-registration__form-container"
      >
        <h2>Representante Legal</h2>

        <div class="grid line-6">
          <div class="company-registration__input-group">
            <input formControlName="name" type="text" placeholder="Nome" />
          </div>
          <div class="company-registration__input-group">
            <input formControlName="email" type="text" placeholder="E-mail" />
          </div>
        </div>

        <div class="grid line-7">
          <div class="company-registration__input-group">
            <input
              formControlName="phoneNumber"
              type="text"
              placeholder="Telefone"
              mask="(00) 90000-0000"
            />
          </div>
          <div class="company-registration__input-group">
            <input
              formControlName="cellNumber"
              type="text"
              placeholder="Celular"
              mask="(00) 0000-0000"
            />
          </div>
        </div>
      </div>

      <div class="company-registration__buttons">
        <app-button
          [text]="'Voltar'"
          [color]="'transparent'"
          [textColor]="'#1C3152'"
        >
        </app-button>

        <app-button
          [text]="'Salvar'"
          [color]="'#1C3152'"
          (click)="onSubmit()"
          [disabled]="form.invalid"
        >
        </app-button>
      </div>
    </form>
  </section>
</main>
